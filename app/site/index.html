<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Kyte - Shipyard</title>
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/assets/css/kyte-form.css">
    <link rel="stylesheet" href="/assets/css/kyte-shipyard-common.css">
    <!--  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito:wght@200;500;700&display=swap" rel="stylesheet">
    <!-- javascripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js" integrity="sha256-hlKLmzaRlE8SCJC1Kw8zoUbU8BxA+8kR3gseuKfMjxA=" crossorigin="anonymous"></script>
    <script>
        // Auto-detect localhost and conditionally load local kyte.js for development
        (function() {
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

            // Load kyte.js: use local dev version on localhost, otherwise use CDN
            const kyteScript = isLocalhost ? '/assets/js/kyte-dev.js' : 'https://cdn.keyqcloud.com/kyte/js/stable/kyte.js';
            document.write('<script src="' + kyteScript + '"' + (isLocalhost ? '' : ' crossorigin="anonymous"') + '><\/script>');

            if (isLocalhost) {
                console.log('%c[DEV MODE] Loading local kyte-api-js from /assets/js/kyte-dev.js', 'color: #FF6B6B; font-weight: bold;');
            }
        })();
    </script>
    <script>
        // Auto-detect localhost and load non-obfuscated source files for development
        (function() {
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            const jsPath = isLocalhost ? '/assets/js/source/' : '/assets/js/';

            const scripts = [
                'kyte-shipyard.js',
                'navigation.js',
                'kyte-shipyard-tables.js',
                'kyte-shipyard-site-details.js'
            ];

            scripts.forEach(function(script) {
                document.write('<script src="' + jsPath + script + '"><\/script>');
            });

            if (isLocalhost) {
                console.log('%c[DEV MODE] Loading non-obfuscated source files from ' + jsPath, 'color: #4CAF50; font-weight: bold;');
            }
        })();
    </script>
    <script>
        // Load kyte-i18n.js with localhost detection
        (function() {
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            const jsPath = isLocalhost ? '/assets/js/source/' : '/assets/js/';
            document.write('<script src="' + jsPath + 'kyte-i18n.js"><\/script>');
        })();
    </script>
    <script>
        document.addEventListener('KyteInitialized', function(e) {
            // Initialize i18n
            const kyteI18n = new KyteI18n('en', '/assets/i18n/');
            window.kyteI18n = kyteI18n;

            // Check for cached language preference
            const cachedLanguage = localStorage.getItem('kyte_user_language');

            // Initialize and translate
            kyteI18n.init(cachedLanguage).then(() => {
                kyteI18n.translateDOM();
                console.log('[Site Detail] Translations loaded for:', kyteI18n.getCurrentLanguage());
            }).catch(error => {
                console.error('[Site Detail] Failed to load translations:', error);
            });
        });
    </script>

</head>

<body>
    <!-- Page loading modal. Once session is validated, the loading modal will close. -->
    <div id="pageLoaderModal" class="modal white" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
        <div class="modal-dialog modal-sm h-100 d-flex">
            <div class="mx-auto align-self-center" style="width: 48px">
                <div class="spinner-wrapper text-center fa-6x"><span class="fas fa-sync fa-spin"></span></div>
            </div>
        </div>
    </div>

    <div id="wrapper">
        <!-- START UNIFIED TOP NAV -->
        <nav id="application-nav" class="navbar navbar-dark navbar-expand-sm">
            <div class="container-fluid">
                <!-- Sidebar Toggle (Mobile) -->
                <button id="sidebar-toggle" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Brand -->
                <a href="/app/" class="navbar-brand">
                    Kyte Shipyard<sup>â„¢</sup>
                    <img src="/assets/images/kyte_shipyard_light.png" alt="Kyte Shipyard">
                </a>

                <!-- Center: App Selector (clickable to dashboard) -->
                <a href="#" id="app-selector" class="mx-auto">
                    <i class="fas fa-rocket"></i>
                    <span id="app-name">Application Dashboard</span>
                </a>

                <!-- Right: Account Dropdown -->
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-2"></i>Account
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="/app/settings.html"><i class="fas fa-cog me-2"></i>Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item logout" href="#"><i class="fas fa-power-off me-2"></i>Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- END UNIFIED TOP NAV -->

        <!-- Page Container with Sidebar -->
        <div id="page-container">
            <!-- Sidebar Overlay for Mobile -->
            <div id="sidebar-overlay"></div>

        <main id="site-detail-page-wrapper">
            <!-- BEGIN SIDE NAVIGATION -->
            <div id="sidenav" class="d-flex flex-column flex-shrink-0">
                <div class="sidebar-header">
                    <a href="#" id="back-to-sites" class="sidebar-back-button mb-3">
                        <i class="fas fa-arrow-left"></i>
                        <span data-i18n="ui.site_detail.back_to_sites">Back to Sites</span>
                    </a>
                    <h3 id="site-name" class="mb-2">Site Name</h3>
                    <div class="site-info">
                        <div class="site-region">
                            <i class="fas fa-globe"></i>
                            <span id="region">US East</span>
                        </div>
                        <div class="site-domain">
                            <a id="domain-name" href="#" target="_blank" title="Click to view site">example.com</a>
                            <button class="copy-url-btn" id="copy-url-btn" title="Copy URL">
                                <i class="fas fa-copy"></i>
                            </button>
                            <span class="copy-tooltip" id="copy-tooltip">Copied!</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-nav">
                    <div class="nav-section">
                        <div class="nav-section-title" data-i18n="ui.site_detail.sidebar.content">Content</div>
                        <button class="nav-link active" data-section="Pages">
                            <i class="fas fa-file-alt"></i>
                            <span data-i18n="ui.site_detail.sidebar.pages">Pages</span>
                        </button>
                        <button class="nav-link" data-section="Media">
                            <i class="fas fa-images"></i>
                            <span data-i18n="ui.site_detail.sidebar.media">Media</span>
                        </button>
                        <button class="nav-link" data-section="Sections">
                            <i class="fas fa-puzzle-piece"></i>
                            <span data-i18n="ui.site_detail.sidebar.sections">Sections</span>
                        </button>
                    </div>

                    <div class="nav-section">
                        <div class="nav-section-title" data-i18n="ui.site_detail.sidebar.structure">Structure</div>
                        <button class="nav-link" data-section="Navigation">
                            <i class="fas fa-bars"></i>
                            <span data-i18n="ui.site_detail.sidebar.navigation">Navigation</span>
                        </button>
                        <button class="nav-link" data-section="SideNav">
                            <i class="fas fa-list"></i>
                            <span data-i18n="ui.site_detail.sidebar.side_menu">Side Menu</span>
                        </button>
                    </div>

                    <div class="nav-section">
                        <div class="nav-section-title" data-i18n="ui.site_detail.sidebar.development">Development</div>
                        <button class="nav-link" data-section="Scripts">
                            <i class="fas fa-code"></i>
                            <span data-i18n="ui.site_detail.sidebar.custom_scripts">Custom Scripts</span>
                        </button>
                        <button class="nav-link" data-section="Library">
                            <i class="fas fa-book"></i>
                            <span data-i18n="ui.site_detail.sidebar.libraries">Libraries</span>
                        </button>
                    </div>

                    <div class="nav-section">
                        <div class="nav-section-title" data-i18n="ui.site_detail.sidebar.configuration">Configuration</div>
                        <button class="nav-link" data-section="Domain">
                            <i class="fas fa-globe-americas"></i>
                            <span data-i18n="ui.site_detail.sidebar.domain">Domain</span>
                        </button>
                        <button class="nav-link" data-section="Settings">
                            <i class="fas fa-cog"></i>
                            <span data-i18n="ui.site_detail.sidebar.settings">Settings</span>
                        </button>
                    </div>
                </div>
            </div>
            <!-- END SIDE NAVIGATION -->

            <div class="main-content">
                <!-- Pages Section -->
                <div id="Pages" class="content-section active">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.pages_title">Pages</h2>
                        <a class="btn-new" href="#" id="createPage">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="ui.site_detail.create_page">Create Page</span>
                        </a>
                    </div>
                    <div class="section-content">
                        <table id="pages-table" class="table table-striped w-100"></table>
                    </div>
                </div>

                <!-- Scripts Section -->
                <div id="Scripts" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.custom_scripts_title">Custom Scripts</h2>
                        <a class="btn-new" href="#" id="newScript">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="ui.site_detail.create_script">Create Script</span>
                        </a>
                    </div>
                    <div class="section-content">
                        <table id="scripts-table" class="table table-striped w-100"></table>
                    </div>
                </div>

                <!-- Library Section -->
                <div id="Library" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.libraries_title">Third Party Libraries</h2>
                        <a class="btn-new" href="#" id="addLibrary">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="ui.site_detail.add_library">Add Library</span>
                        </a>
                    </div>
                    <div class="section-content">
                        <table id="libraries-table" class="table table-striped w-100"></table>
                    </div>
                </div>

                <!-- Media Section -->
                <div id="Media" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.media_title">Media</h2>
                        <a class="btn-new" href="#" id="newMedia">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="ui.site_detail.upload_media">Upload Media</span>
                        </a>
                    </div>
                    <div class="section-content">
                        <table id="media-table" class="table table-striped w-100"></table>
                    </div>
                </div>

                <!-- Section -->
                <div id="Sections" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.sections_title">Sections</h2>
                        <a class="btn-new" href="#" id="addSection">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="ui.site_detail.add_section">Add Section</span>
                        </a>
                    </div>
                    <div class="section-content">
                        <table id="sections-table" class="table table-striped w-100"></table>
                    </div>
                </div>

                <!-- Navigation Section -->
                <div id="Navigation" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.navigation_title">Navigation</h2>
                        <div></div>
                    </div>
                    <div class="section-content">
                        <!-- Navigation Selector -->
                        <div class="mb-4">
                            <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.select_menu">Select Navigation Menu:</label>
                            <select class="form-select" id="navigation-selector">
                                <option value="" data-i18n="ui.site_detail.navigation.loading_menus">Loading navigation menus...</option>
                            </select>
                        </div>

                        <!-- Navigation Items Container -->
                        <div id="navigation-items-container" style="display: none;">
                            <!-- Navigation Management Tabs -->
                            <ul class="nav nav-tabs nav-fill mb-4">
                                <li class="nav-item">
                                    <button class="nav-link active" id="nav-items-tab" data-bs-toggle="tab" data-bs-target="#nav-items-content">
                                        <i class="fas fa-list me-2"></i><span data-i18n="ui.site_detail.navigation.tab_items">Navigation Items</span>
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button class="nav-link" id="nav-styles-tab" data-bs-toggle="tab" data-bs-target="#nav-styles-content">
                                        <i class="fas fa-palette me-2"></i><span data-i18n="ui.site_detail.navigation.tab_styles">Styles & Preview</span>
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button class="nav-link" id="nav-settings-tab" data-bs-toggle="tab" data-bs-target="#nav-settings-content">
                                        <i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.navigation.tab_settings">Settings</span>
                                    </button>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <!-- Navigation Items Tab -->
                                <div class="tab-pane fade show active" id="nav-items-content">
                            
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h5 class="mb-0" id="current-navigation-name"><span data-i18n="ui.site_detail.navigation.items_title">Navigation Items</span></h5>
                                            <small class="text-muted" data-i18n="ui.site_detail.navigation.drag_hint">Drag items to reorder</small>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-outline-primary" id="publishNavigation">
                                                <i class="fas fa-upload me-2"></i><span data-i18n="ui.site_detail.navigation.publish_button">Publish Navigation</span>
                                            </button>
                                            <button class="btn-new" id="addNavigationItem">
                                                <i class="fas fa-plus"></i>
                                                <span data-i18n="ui.site_detail.navigation.add_item_button">Add Navigation Item</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Sortable Navigation Items -->
                                    <ul id="sortable-navigation-items" class="list-unstyled">
                                        <!-- Navigation items will be populated here -->
                                    </ul>
                                    
                                    <!-- Empty State -->
                                    <div id="navigation-empty-state" class="text-center py-5" style="display: none;">
                                        <i class="fas fa-compass fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted" data-i18n="ui.site_detail.navigation.empty_title">No Navigation Items</h5>
                                        <p class="text-muted" data-i18n="ui.site_detail.navigation.empty_description">Click "Add Navigation Item" to create your first navigation link.</p>
                                    </div>
                                </div>

                                <!-- Styles Tab -->
                                <div class="tab-pane fade" id="nav-styles-content">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.navigation.settings_card">Navigation Settings</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="mb-3">
                                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.sticky_top_label">Sticky Top</label>
                                                        <select class="form-select" id="nav-sticky-top">
                                                            <option value="1" data-i18n="ui.site_detail.navigation.sticky_yes">Yes - Stick to top when scrolling</option>
                                                            <option value="0" data-i18n="ui.site_detail.navigation.sticky_no">No - Normal positioning</option>
                                                        </select>
                                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.sticky_hint">Make navigation bar stick to top when scrolling</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="card mt-3">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-palette me-2"></i><span data-i18n="ui.site_detail.navigation.color_scheme">Color Scheme</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.bg_color">Background Color</label>
                                                            <input type="color" class="form-control form-control-color" id="nav-bg-color" />
                                                        </div>
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.text_color">Text Color</label>
                                                            <input type="color" class="form-control form-control-color" id="nav-text-color" />
                                                        </div>
                                                    </div>
                                                    <div class="row mt-3">
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.dropdown_bg">Dropdown Background</label>
                                                            <input type="color" class="form-control form-control-color" id="nav-dropdown-bg-color" />
                                                        </div>
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.dropdown_text">Dropdown Text</label>
                                                            <input type="color" class="form-control form-control-color" id="nav-dropdown-text-color" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-eye me-2"></i><span data-i18n="ui.site_detail.navigation.live_preview">Live Preview</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div id="navigation-preview" class="border rounded">
                                                        <nav class="navbar navbar-expand-lg" id="preview-navbar">
                                                            <div class="container-fluid">
                                                                <a class="navbar-brand" href="#">Brand</a>
                                                                <button class="navbar-toggler" type="button">
                                                                    <span class="navbar-toggler-icon"></span>
                                                                </button>
                                                                <div class="collapse navbar-collapse">
                                                                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                                                        <li class="nav-item">
                                                                            <a class="nav-link active">Home</a>
                                                                        </li>
                                                                        <li class="nav-item">
                                                                            <a class="nav-link">About</a>
                                                                        </li>
                                                                        <li class="nav-item dropdown">
                                                                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                                                                Services
                                                                            </a>
                                                                            <ul class="dropdown-menu">
                                                                                <li><a class="dropdown-item" href="#">Web Design</a></li>
                                                                                <li><a class="dropdown-item" href="#">Development</a></li>
                                                                                <li><hr class="dropdown-divider"></li>
                                                                                <li><a class="dropdown-item" href="#">Consulting</a></li>
                                                                            </ul>
                                                                        </li>
                                                                        <li class="nav-item">
                                                                            <a class="nav-link">Contact</a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </nav>
                                                    </div>
                                                    <small class="text-muted mt-2 d-block" data-i18n="ui.site_detail.navigation.preview_hint">Preview updates as you change colors above</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Navigation Settings Tab -->
                                <div class="tab-pane fade" id="nav-settings-content">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.navigation.general_settings">General Settings</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="mb-3">
                                                        <label for="nav-name" class="form-label fw-bold" data-i18n="ui.site_detail.navigation.name_label">Navigation Name</label>
                                                        <input type="text" class="form-control" id="nav-name" data-i18n-placeholder="ui.site_detail.navigation.name_placeholder" placeholder="Enter navigation menu name">
                                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.name_hint">This name is used to identify the navigation menu in the admin panel</small>
                                                    </div>

                                                    <div class="mb-3">
                                                        <label for="nav-page" class="form-label fw-bold" data-i18n="ui.site_detail.navigation.page_label">Navigation Page</label>
                                                        <select class="form-select" id="nav-page">
                                                            <option value="" data-i18n="ui.site_detail.navigation.page_option">Select page for navbar title/logo click...</option>
                                                            <!-- Pages will be populated by JavaScript -->
                                                        </select>
                                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.page_hint">Page to navigate to when the navbar title/logo is clicked</small>
                                                    </div>

                                                    <div class="mb-3">
                                                        <label for="nav-logo" class="form-label fw-bold"><span data-i18n="ui.site_detail.navigation.logo_label">Navigation Logo</span> <span class="text-muted" data-i18n="ui.site_detail.navigation.optional">(optional)</span></label>
                                                        <select class="form-select" id="nav-logo">
                                                            <option value="" data-i18n="ui.site_detail.navigation.loading_media">Loading media assets...</option>
                                                        </select>
                                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.logo_hint">Select a logo image from your media library. Leave blank to use text-based brand name</small>
                                                        
                                                        <!-- Logo Preview -->
                                                        <div class="mt-2 p-2 bg-light rounded" id="logo-preview-container" style="display: none;">
                                                            <small class="text-muted d-block mb-1">Preview:</small>
                                                            <div id="logo-preview" class="d-flex align-items-center">
                                                                <!-- Preview content will be inserted here -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="d-flex gap-2 mt-4">
                                                        <button type="button" class="btn btn-primary" id="save-nav-settings">
                                                            <i class="fas fa-save me-2"></i><span data-i18n="ui.site_detail.navigation.save_button">Save Settings</span>
                                                        </button>
                                                        <button type="button" class="btn btn-outline-secondary" id="delete-navigation">
                                                            <i class="fas fa-trash me-2"></i><span data-i18n="ui.site_detail.navigation.delete_button">Delete Navigation</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-info-circle me-2"></i><span data-i18n="ui.site_detail.navigation.information">Information</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.navigation.nav_id">Navigation ID:</small>
                                                        <span id="nav-info-id" class="badge bg-secondary">-</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.navigation.total_items">Total Items:</small>
                                                        <span id="nav-info-item-count" class="badge bg-info">0</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.navigation.last_modified">Last Modified:</small>
                                                        <span id="nav-info-modified" class="text-muted">-</span>
                                                    </div>

                                                    <div class="alert alert-info mb-0">
                                                        <small>
                                                            <i class="fas fa-lightbulb me-1"></i>
                                                            <strong data-i18n="ui.site_detail.navigation.tip_label">Tip:</strong> <span data-i18n="ui.site_detail.navigation.tip_text">You can set a specific page for users to navigate to when they click on your site's logo or title in the navigation bar.</span>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- No Navigation Selected State -->
                        <div id="no-navigation-selected" class="text-center py-5">
                            <i class="fas fa-compass fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted" data-i18n="ui.site_detail.navigation.no_menu_title">No Navigation Menu Selected</h5>
                            <p class="text-muted" data-i18n="ui.site_detail.navigation.no_menu_description">Select a navigation menu from the dropdown above, or create a new one.</p>
                            <button class="btn btn-outline-primary" id="create-new-navigation">
                                <i class="fas fa-plus me-2"></i><span data-i18n="ui.site_detail.navigation.create_new_button">Create New Navigation Menu</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Navigation Item Template (will be cloned for each item) -->
                <template id="navigation-item-template">
                    <li class="navigation-item mb-3" data-nav-item-id="">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-grip-vertical text-muted me-3" style="cursor: move;" data-i18n-title="ui.site_detail.navigation.template.drag_hint" title="Drag to reorder"></i>
                                        <h6 class="mb-0" data-i18n="ui.site_detail.navigation.template.item_title">Navigation Item</h6>
                                    </div>
                                    <button class="btn btn-outline-danger btn-sm delete-nav-item" data-i18n-title="ui.site_detail.navigation.template.delete_hint" title="Delete Item">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.label">Label</label>
                                        <input type="text" class="form-control nav-item-title" data-i18n-placeholder="ui.site_detail.navigation.template.label_placeholder" placeholder="Menu Label">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.link_type">Link Type</label>
                                        <select class="form-select nav-item-type">
                                            <option value="page" data-i18n="ui.site_detail.navigation.template.type_page">Page</option>
                                            <option value="link" data-i18n="ui.site_detail.navigation.template.type_link">Custom Link</option>
                                            <option value="logout" data-i18n="ui.site_detail.navigation.template.type_logout">Logout Link</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.position">Position</label>
                                        <select class="form-select nav-item-position">
                                            <option value="1" data-i18n="ui.site_detail.navigation.template.position_center">Center</option>
                                            <option value="0" data-i18n="ui.site_detail.navigation.template.position_right">Right</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-6 nav-item-page-wrapper">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.target_page">Target Page</label>
                                        <select class="form-select nav-item-page">
                                            <option value="" data-i18n="ui.site_detail.navigation.template.select_page">Select a page...</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 nav-item-link-wrapper" style="display: none;">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.custom_url">Custom URL</label>
                                        <input type="text" class="form-control nav-item-link" data-i18n-placeholder="ui.site_detail.navigation.template.url_placeholder" placeholder="https://example.com or /page">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.parent">Parent Menu Item</label>
                                        <select class="form-select nav-item-parent">
                                            <option value="0" data-i18n="ui.site_detail.navigation.template.no_parent">No Parent (Top Level)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.icon">Font Awesome Icon</label>
                                        <input type="text" class="form-control nav-item-icon" data-i18n-placeholder="ui.site_detail.navigation.template.icon_placeholder" placeholder="fas fa-home">
                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.template.icon_hint">Optional icon class</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.element_id">Element ID</label>
                                        <input type="text" class="form-control nav-item-element-id" data-i18n-placeholder="ui.site_detail.navigation.template.id_placeholder" placeholder="my-nav-item">
                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.template.id_hint">Optional HTML ID</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.navigation.template.css_classes">CSS Classes</label>
                                        <input type="text" class="form-control nav-item-element-class" data-i18n-placeholder="ui.site_detail.navigation.template.css_placeholder" placeholder="custom-class another-class">
                                        <small class="text-muted" data-i18n="ui.site_detail.navigation.template.css_hint">Optional CSS classes</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </template>

                <!-- Sections Section -->
                <div id="SideNav" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.sidenav_title">Side Navigation</h2>
                        <div></div>
                    </div>
                    <div class="section-content">
                        <!-- Side Navigation Selector -->
                        <div class="mb-4">
                            <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.select_menu">Select Side Navigation Menu:</label>
                            <select class="form-select" id="sidenav-selector">
                                <option value="" data-i18n="ui.site_detail.sidenav.loading_menus">Loading side navigation menus...</option>
                            </select>
                        </div>

                        <!-- Side Navigation Items Container -->
                        <div id="sidenav-items-container" style="display: none;">
                            <!-- Side Navigation Management Tabs -->
                            <ul class="nav nav-tabs nav-fill mb-4">
                                <li class="nav-item">
                                    <button class="nav-link active" id="sidenav-items-tab" data-bs-toggle="tab" data-bs-target="#sidenav-items-content">
                                        <i class="fas fa-list me-2"></i><span data-i18n="ui.site_detail.sidenav.tab_items">Navigation Items</span>
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button class="nav-link" id="sidenav-styles-tab" data-bs-toggle="tab" data-bs-target="#sidenav-styles-content">
                                        <i class="fas fa-palette me-2"></i><span data-i18n="ui.site_detail.sidenav.tab_styles">Styles & Layout</span>
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button class="nav-link" id="sidenav-settings-tab" data-bs-toggle="tab" data-bs-target="#sidenav-settings-content">
                                        <i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.sidenav.tab_settings">Settings</span>
                                    </button>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <!-- Side Navigation Items Tab -->
                                <div class="tab-pane fade show active" id="sidenav-items-content">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h5 class="mb-0" id="current-sidenav-name"><span data-i18n="ui.site_detail.sidenav.items_title">Side Navigation Items</span></h5>
                                            <small class="text-muted" data-i18n="ui.site_detail.sidenav.drag_hint">Drag items to reorder</small>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-outline-primary" id="publishSideNavigation">
                                                <i class="fas fa-upload me-2"></i><span data-i18n="ui.site_detail.sidenav.publish_button">Publish Side Nav</span>
                                            </button>
                                            <button class="btn-new" id="addSideNavigationItem">
                                                <i class="fas fa-plus"></i>
                                                <span data-i18n="ui.site_detail.sidenav.add_item_button">Add Side Nav Item</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Sortable Side Navigation Items -->
                                    <ul id="sortable-sidenav-items" class="list-unstyled">
                                        <!-- Side navigation items will be populated here -->
                                    </ul>

                                    <!-- Empty State -->
                                    <div id="sidenav-empty-state" class="text-center py-5" style="display: none;">
                                        <i class="fas fa-bars fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted" data-i18n="ui.site_detail.sidenav.empty_title">No Side Navigation Items</h5>
                                        <p class="text-muted" data-i18n="ui.site_detail.sidenav.empty_description">Click "Add Side Nav Item" to create your first side navigation link.</p>
                                    </div>
                                </div>
                            
                                <!-- Styles Tab -->
                                <div class="tab-pane fade" id="sidenav-styles-content">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <!-- Layout Style -->
                                            <div class="card mb-4">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-layout me-2"></i><span data-i18n="ui.site_detail.sidenav.layout_style">Layout Style</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row text-center">
                                                        <div class="col-4">
                                                            <div class="layout-option" data-column-style="0">
                                                                <div class="layout-preview mb-2">
                                                                    <img src="/assets/images/icons/column-type-icons-01.png" data-i18n-alt="ui.site_detail.sidenav.layout_default" alt="Default Style" class="img-fluid" style="max-height: 80px;">
                                                                </div>
                                                                <h6 class="small" data-i18n="ui.site_detail.sidenav.layout_default">Default Style</h6>
                                                                <input type="radio" name="columnStyle" value="0" class="form-check-input">
                                                            </div>
                                                        </div>
                                                        <div class="col-4">
                                                            <div class="layout-option" data-column-style="1">
                                                                <div class="layout-preview mb-2">
                                                                    <img src="/assets/images/icons/column-type-icons-02.png" data-i18n-alt="ui.site_detail.sidenav.layout_rounded" alt="Rounded Corners" class="img-fluid" style="max-height: 80px;">
                                                                </div>
                                                                <h6 class="small" data-i18n="ui.site_detail.sidenav.layout_rounded">Rounded Corners</h6>
                                                                <input type="radio" name="columnStyle" value="1" class="form-check-input">
                                                            </div>
                                                        </div>
                                                        <div class="col-4">
                                                            <div class="layout-option" data-column-style="2">
                                                                <div class="layout-preview mb-2">
                                                                    <img src="/assets/images/icons/column-type-icons-03.png" data-i18n-alt="ui.site_detail.sidenav.layout_rounded_full" alt="Rounded + Full Height" class="img-fluid" style="max-height: 80px;">
                                                                </div>
                                                                <h6 class="small" data-i18n="ui.site_detail.sidenav.layout_rounded_full">Rounded + Full Height</h6>
                                                                <input type="radio" name="columnStyle" value="2" class="form-check-input">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Navigation Item Style -->
                                            <div class="card mb-4">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-th-list me-2"></i><span data-i18n="ui.site_detail.sidenav.item_style">Navigation Item Style</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row text-center">
                                                        <div class="col-6">
                                                            <div class="nav-item-option" data-nav-item-style="0">
                                                                <div class="nav-item-preview mb-2">
                                                                    <img src="/assets/images/icons/side-nav-item-type-icons-01.png" data-i18n-alt="ui.site_detail.sidenav.item_left_aligned" alt="Left Aligned" class="img-fluid" style="max-height: 80px;">
                                                                </div>
                                                                <h6 class="small" data-i18n="ui.site_detail.sidenav.item_left_aligned">Left Aligned<br>Icon + Text</h6>
                                                                <input type="radio" name="navItemStyle" value="0" class="form-check-input">
                                                            </div>
                                                        </div>
                                                        <div class="col-6">
                                                            <div class="nav-item-option" data-nav-item-style="1">
                                                                <div class="nav-item-preview mb-2">
                                                                    <img src="/assets/images/icons/side-nav-item-type-icons-02.png" data-i18n-alt="ui.site_detail.sidenav.item_centered" alt="Centered" class="img-fluid" style="max-height: 80px;">
                                                                </div>
                                                                <h6 class="small" data-i18n="ui.site_detail.sidenav.item_centered">Centered<br>Icon Above Text</h6>
                                                                <input type="radio" name="navItemStyle" value="1" class="form-check-input">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <!-- Color Scheme -->
                                            <div class="card mb-4">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-palette me-2"></i><span data-i18n="ui.site_detail.sidenav.color_scheme">Color Scheme</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row g-3">
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.bg_color">Background Color</label>
                                                            <input type="color" class="form-control form-control-color" id="sidenav-bg-color" />
                                                        </div>
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.text_color">Text Color</label>
                                                            <input type="color" class="form-control form-control-color" id="sidenav-text-color" />
                                                        </div>
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.active_bg">Active Background</label>
                                                            <input type="color" class="form-control form-control-color" id="sidenav-active-bg-color" />
                                                        </div>
                                                        <div class="col-6">
                                                            <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.active_text">Active Text Color</label>
                                                            <input type="color" class="form-control form-control-color" id="sidenav-active-text-color" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Live Preview -->
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-eye me-2"></i><span data-i18n="ui.site_detail.sidenav.live_preview">Live Preview</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div id="sidenav-preview" class="border rounded p-3">
                                                        <div class="nav flex-column nav-pills" id="preview-sidenav" aria-orientation="vertical">
                                                            <button class="nav-link active mb-2" type="button">
                                                                <i class="fas fa-home me-2"></i><span data-i18n="ui.site_detail.sidenav.preview_home">Home</span>
                                                            </button>
                                                            <button class="nav-link mb-2" type="button">
                                                                <i class="fas fa-user me-2"></i><span data-i18n="ui.site_detail.sidenav.preview_profile">Profile</span>
                                                            </button>
                                                            <button class="nav-link mb-2" type="button">
                                                                <i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.sidenav.preview_settings">Settings</span>
                                                            </button>
                                                            <button class="nav-link" type="button" disabled>
                                                                <i class="fas fa-ban me-2"></i><span data-i18n="ui.site_detail.sidenav.preview_disabled">Disabled</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <small class="text-muted mt-2 d-block" data-i18n="ui.site_detail.sidenav.preview_hint">Preview updates as you change styles above</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Side Navigation Settings Tab -->
                                <div class="tab-pane fade" id="sidenav-settings-content">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-cog me-2"></i><span data-i18n="ui.site_detail.sidenav.general_settings">General Settings</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="mb-3">
                                                        <label for="sidenav-name" class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.name_label">Side Navigation Name</label>
                                                        <input type="text" class="form-control" id="sidenav-name" data-i18n-placeholder="ui.site_detail.sidenav.name_placeholder" placeholder="Enter side navigation menu name">
                                                        <small class="text-muted" data-i18n="ui.site_detail.sidenav.name_hint">This name is used to identify the side navigation menu in the admin panel</small>
                                                    </div>

                                                    <div class="d-flex gap-2 mt-4">
                                                        <button type="button" class="btn btn-primary" id="save-sidenav-settings">
                                                            <i class="fas fa-save me-2"></i><span data-i18n="ui.site_detail.sidenav.save_button">Save Settings</span>
                                                        </button>
                                                        <button type="button" class="btn btn-outline-secondary" id="delete-sidenav">
                                                            <i class="fas fa-trash me-2"></i><span data-i18n="ui.site_detail.sidenav.delete_button">Delete Side Navigation</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0"><i class="fas fa-info-circle me-2"></i><span data-i18n="ui.site_detail.sidenav.information">Information</span></h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.sidenav.sidenav_id">Side Navigation ID:</small>
                                                        <span id="sidenav-info-id" class="badge bg-secondary">-</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.sidenav.total_items">Total Items:</small>
                                                        <span id="sidenav-info-item-count" class="badge bg-info">0</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.sidenav.column_style_label">Column Style:</small>
                                                        <span id="sidenav-info-column-style" class="badge bg-success" data-i18n="ui.site_detail.sidenav.badge_default">Default</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.sidenav.item_style_label">Item Style:</small>
                                                        <span id="sidenav-info-item-style" class="badge bg-warning" data-i18n="ui.site_detail.sidenav.badge_left_aligned">Left Aligned</span>
                                                    </div>

                                                    <div class="mb-3">
                                                        <small class="text-muted d-block mb-1" data-i18n="ui.site_detail.sidenav.last_modified">Last Modified:</small>
                                                        <span id="sidenav-info-modified" class="text-muted">-</span>
                                                    </div>

                                                    <div class="alert alert-info mb-0">
                                                        <small>
                                                            <i class="fas fa-lightbulb me-1"></i>
                                                            <strong data-i18n="ui.site_detail.sidenav.tip_label">Tip:</strong> <span data-i18n="ui.site_detail.sidenav.tip_text">Side navigation menus are perfect for creating vertical navigation panels that can be embedded in your page layouts.</span>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- No Side Navigation Selected State -->
                        <div id="no-sidenav-selected" class="text-center py-5">
                            <i class="fas fa-bars fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted" data-i18n="ui.site_detail.sidenav.no_menu_title">No Side Navigation Menu Selected</h5>
                            <p class="text-muted" data-i18n="ui.site_detail.sidenav.no_menu_description">Select a side navigation menu from the dropdown above, or create a new one.</p>
                            <button class="btn btn-outline-primary" id="create-new-sidenav">
                                <i class="fas fa-plus me-2"></i><span data-i18n="ui.site_detail.sidenav.create_new_button">Create New Side Navigation Menu</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Side Navigation Item Template (will be cloned for each item) -->
                <template id="sidenav-item-template">
                    <li class="sidenav-item mb-3" data-sidenav-item-id="">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-grip-vertical text-muted me-3" style="cursor: move;" data-i18n-title="ui.site_detail.sidenav.template.drag_hint" title="Drag to reorder"></i>
                                        <h6 class="mb-0" data-i18n="ui.site_detail.sidenav.template.item_title">Side Navigation Item</h6>
                                    </div>
                                    <button class="btn btn-outline-danger btn-sm delete-sidenav-item" data-i18n-title="ui.site_detail.sidenav.template.delete_hint" title="Delete Item">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.label">Label</label>
                                        <input type="text" class="form-control sidenav-item-title" data-i18n-placeholder="ui.site_detail.sidenav.template.label_placeholder" placeholder="Menu Label">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.link_type">Link Type</label>
                                        <select class="form-select sidenav-item-type">
                                            <option value="page" data-i18n="ui.site_detail.sidenav.template.type_page">Page</option>
                                            <option value="link" data-i18n="ui.site_detail.sidenav.template.type_link">Custom Link</option>
                                            <option value="logout" data-i18n="ui.site_detail.sidenav.template.type_logout">Logout Link</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-6 sidenav-item-page-wrapper">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.page_label">Select Page</label>
                                        <select class="form-select sidenav-item-page">
                                            <option value="" data-i18n="ui.site_detail.sidenav.template.page_placeholder">Select a page...</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 sidenav-item-link-wrapper" style="display: none;">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.url_label">Link URL</label>
                                        <input type="text" class="form-control sidenav-item-link" data-i18n-placeholder="ui.site_detail.sidenav.template.url_placeholder" placeholder="https://example.com or /page">
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.icon">Icon</label>
                                        <input type="text" class="form-control sidenav-item-icon" data-i18n-placeholder="ui.site_detail.sidenav.template.icon_placeholder" placeholder="fas fa-home">
                                        <small class="text-muted" data-i18n="ui.site_detail.sidenav.template.icon_hint">Optional icon class</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.element_id">Element ID</label>
                                        <input type="text" class="form-control sidenav-item-element-id" data-i18n-placeholder="ui.site_detail.sidenav.template.id_placeholder" placeholder="my-sidenav-item">
                                        <small class="text-muted" data-i18n="ui.site_detail.sidenav.template.id_hint">Optional HTML ID</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold" data-i18n="ui.site_detail.sidenav.template.css_classes">CSS Classes</label>
                                        <input type="text" class="form-control sidenav-item-element-class" data-i18n-placeholder="ui.site_detail.sidenav.template.css_placeholder" placeholder="custom-class another-class">
                                        <small class="text-muted" data-i18n="ui.site_detail.sidenav.template.css_hint">Optional CSS classes</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </template>

                <!-- Domain Section (Streamlined) -->
                <div id="Domain" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.domain.title">Custom Domain</h2>
                    </div>
                    <div class="section-content">
                        <!-- Domain Configuration -->
                        <div id="domain-config-section">
                            <!-- No Domain State -->
                            <div id="no-domain-state" class="domain-input-section">
                                <div class="mb-3">
                                    <i class="fas fa-globe fa-3x text-muted mb-3"></i>
                                    <h4 data-i18n="ui.site_detail.domain.add_title">Add Custom Domain</h4>
                                    <p class="text-muted" data-i18n="ui.site_detail.domain.add_description">Configure a custom domain for your site instead of using the default CloudFront domain.</p>
                                </div>
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <input type="text" class="form-control" id="domain-input" data-i18n-placeholder="ui.site_detail.domain.placeholder" placeholder="example.com" />
                                            <button class="btn btn-primary" type="button" id="add-domain-btn">
                                                <i class="fas fa-plus me-2"></i><span data-i18n="ui.site_detail.domain.add_button">Add Domain</span>
                                            </button>
                                        </div>
                                        <small class="text-muted" data-i18n="ui.site_detail.domain.enter_hint">Enter your domain name without https://</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Has Domain State -->
                            <div id="has-domain-state" class="domain-input-section has-domain" style="display: none;">
                                <div class="domain-card">
                                    <div class="domain-header">
                                        <div class="d-flex justify-content-between align-items-center w-100">
                                            <div>
                                                <h5 class="mb-1" id="configured-domain">example.com</h5>
                                                <div class="domain-status">
                                                    <span class="status-indicator" id="domain-status-indicator"></span>
                                                    <span id="domain-status-text">Unknown</span>
                                                </div>
                                            </div>
                                            <div class="d-flex gap-2">
                                                <button class="btn btn-outline-primary" id="assign-domain-btn" style="display: none;">
                                                    <i class="fas fa-link me-2"></i><span data-i18n="ui.site_detail.domain.assign_button">Assign</span>
                                                </button>
                                                <button class="btn btn-outline-danger" id="unassign-domain-btn" style="display: none;">
                                                    <i class="fas fa-unlink me-2"></i><span data-i18n="ui.site_detail.domain.unassign_button">Unassign</span>
                                                </button>
                                                <button class="btn btn-outline-secondary" id="remove-domain-btn">
                                                    <i class="fas fa-trash me-2"></i><span data-i18n="ui.site_detail.domain.remove_button">Remove</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="domain-body">
                                        <!-- DNS Records Section - Always show when records exist -->
                                        <div id="dns-records-section" style="display: none;">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <h6 class="mb-0" data-i18n="ui.site_detail.domain.dns_config_required">DNS Configuration Required</h6>
                                                <button class="btn btn-outline-primary btn-sm" id="refresh-dns-btn">
                                                    <i class="fas fa-sync me-2"></i><span data-i18n="ui.site_detail.domain.refresh_status">Refresh Status</span>
                                                </button>
                                            </div>
                                            <p class="text-muted mb-3" data-i18n="ui.site_detail.domain.add_dns_records">Add the following DNS records to validate your domain:</p>

                                            <!-- DNS Records Container - This is the critical part! -->
                                            <div id="dns-records-container"></div>

                                            <!-- Helper Tips -->
                                            <div class="my-4 p-3" style="background: #f8fafc; border-radius: 8px; border-left: 4px solid #3b82f6;">
                                                <h6 class="text-primary mb-2"><i class="fas fa-lightbulb me-2"></i><span data-i18n="ui.site_detail.domain.dns_instructions">DNS Setup Instructions</span></h6>
                                                <ol class="mb-0 text-muted small">
                                                    <li data-i18n="ui.site_detail.domain.dns_step1"><strong>Copy the records above</strong> - Use the copy buttons for accuracy</li>
                                                    <li data-i18n="ui.site_detail.domain.dns_step2"><strong>Log into your DNS provider</strong> (Cloudflare, Route53, GoDaddy, etc.)</li>
                                                    <li data-i18n="ui.site_detail.domain.dns_step3"><strong>Add each CNAME record</strong> - Name â†’ Target as shown above</li>
                                                    <li data-i18n="ui.site_detail.domain.dns_step4"><strong>Save changes</strong> - TTL can be 300 seconds or Auto</li>
                                                    <li data-i18n="ui.site_detail.domain.dns_step5"><strong>Wait for validation</strong> - Usually 5-30 minutes, max 24 hours</li>
                                                </ol>
                                            </div>
                                        </div>

                                        <!-- No Records State - Only show when truly no records -->
                                        <div id="no-records-state" class="text-center py-4" style="display: none;">
                                            <div class="spinner-border text-primary mb-3" role="status">
                                                <span class="visually-hidden" data-i18n="ui.site_detail.domain.loading">Loading...</span>
                                            </div>
                                            <h6 class="text-muted" data-i18n="ui.site_detail.domain.generating_records">Generating DNS validation records...</h6>
                                            <p class="text-muted small" data-i18n="ui.site_detail.domain.generating_hint">This usually takes 30-60 seconds. We'll refresh automatically.</p>
                                            <div class="progress mt-3" style="height: 4px;">
                                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div>
                                            </div>
                                        </div>

                                        <!-- Domain Active State -->
                                        <div id="domain-active" style="display: none;">
                                            <div class="alert alert-success border-0" style="background: linear-gradient(135deg, #10b981, #059669);">
                                                <div class="d-flex align-items-center justify-content-center text-white">
                                                    <i class="fas fa-check-circle fa-2x me-3"></i>
                                                    <div>
                                                        <h6 class="mb-1 text-white" data-i18n="ui.site_detail.domain.active_title">Domain is Active! ðŸŽ‰</h6>
                                                        <p class="mb-0 opacity-90" data-i18n="ui.site_detail.domain.active_description">Your SSL certificate is valid and your domain is ready to use.</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Domain Health Check -->
                                            <div class="row mt-3">
                                                <div class="col-md-4">
                                                    <div class="text-center p-3" style="background: #f0fdf4; border-radius: 8px;">
                                                        <i class="fas fa-shield-alt text-success fa-2x mb-2"></i>
                                                        <h6 class="text-success mb-1" data-i18n="ui.site_detail.domain.ssl_certificate">SSL Certificate</h6>
                                                        <small class="text-muted" data-i18n="ui.site_detail.domain.ssl_status">Valid & Secure</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="text-center p-3" style="background: #f0fdf4; border-radius: 8px;">
                                                        <i class="fas fa-globe text-success fa-2x mb-2"></i>
                                                        <h6 class="text-success mb-1" data-i18n="ui.site_detail.domain.dns_resolution">DNS Resolution</h6>
                                                        <small class="text-muted" data-i18n="ui.site_detail.domain.dns_status">Working</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="text-center p-3" style="background: #f0fdf4; border-radius: 8px;">
                                                        <i class="fas fa-rocket text-success fa-2x mb-2"></i>
                                                        <h6 class="text-success mb-1" data-i18n="ui.site_detail.domain.cdn_status_title">CDN Status</h6>
                                                        <small class="text-muted" data-i18n="ui.site_detail.domain.cdn_status">Deployed</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Failed State -->
                                        <div id="domain-failed" style="display: none;">
                                            <div class="alert alert-danger border-0">
                                                <div class="d-flex align-items-center justify-content-center">
                                                    <i class="fas fa-exclamation-triangle fa-2x me-3"></i>
                                                    <div>
                                                        <h6 class="mb-1" data-i18n="ui.site_detail.domain.failed_title">Domain Validation Failed</h6>
                                                        <p class="mb-2" data-i18n="ui.site_detail.domain.failed_description">We couldn't validate your domain. This could be due to:</p>
                                                        <ul class="mb-3 small">
                                                            <li data-i18n="ui.site_detail.domain.failed_reason1">DNS records not properly configured</li>
                                                            <li data-i18n="ui.site_detail.domain.failed_reason2">Domain not pointing to the correct nameservers</li>
                                                            <li data-i18n="ui.site_detail.domain.failed_reason3">Validation timeout (24 hours exceeded)</li>
                                                        </ul>
                                                        <button class="btn btn-outline-danger btn-sm me-2" id="retry-validation-btn">
                                                            <i class="fas fa-redo me-2"></i><span data-i18n="ui.site_detail.domain.retry_button">Retry Validation</span>
                                                        </button>
                                                        <button class="btn btn-outline-secondary btn-sm" id="contact-support-btn">
                                                            <i class="fas fa-life-ring me-2"></i><span data-i18n="ui.site_detail.domain.contact_support">Contact Support</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Pending with Progress Indicator -->
                                        <div id="domain-pending" style="display: none;">
                                            <div class="alert alert-warning border-0" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">
                                                <div class="d-flex align-items-center justify-content-center text-white">
                                                    <div class="spinner-border spinner-border-sm me-3" role="status">
                                                        <span class="visually-hidden" data-i18n="ui.site_detail.domain.loading">Loading...</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-1 text-white" data-i18n="ui.site_detail.domain.pending_title">Validation in Progress</h6>
                                                        <p class="mb-0 opacity-90" data-i18n="ui.site_detail.domain.pending_description">We're validating your domain. This typically takes 5-10 minutes.</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Estimated Progress -->
                                            <div class="mt-3">
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <small class="text-muted" data-i18n="ui.site_detail.domain.progress_label">Estimated progress</small>
                                                    <small class="text-muted" id="validation-timer"><span data-i18n="ui.site_detail.domain.started_now">Started just now</span></small>
                                                </div>
                                                <div class="progress" style="height: 6px;">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning"
                                                        role="progressbar" id="validation-progress" style="width: 10%"></div>
                                                </div>
                                                <small class="text-muted mt-1 d-block" data-i18n="ui.site_detail.domain.auto_refresh">We'll automatically refresh when validation completes</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="Settings" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="ui.site_detail.settings.title">Site Settings</h2>
                    </div>
                    <div class="section-content">
                        <div class="settings-grid">
                            <!-- Site Alias -->
                            <div class="setting-card">
                                <div class="setting-card-header" data-i18n="ui.site_detail.settings.alias_title">Site Alias Domain</div>
                                <div class="setting-card-body">
                                    <p data-i18n="ui.site_detail.settings.alias_description">Configure an alternative domain for your site</p>
                                    <input type="text" class="form-control" name="aliasDomain" id="aliasDomain" data-i18n-placeholder="ui.site_detail.settings.alias_placeholder" placeholder="alias.example.com" />
                                </div>
                            </div>

                            <!-- Site Language -->
                            <div class="setting-card">
                                <div class="setting-card-header" data-i18n="ui.site_detail.settings.language_title">Site Language</div>
                                <div class="setting-card-body">
                                    <p data-i18n="ui.site_detail.settings.language_description">Sets the default language for the site. Can be overridden at a per page level when a page specific language is configured.</p>
                                    <select name="default_lang" id="default_lang" class="form-select">
                                        <option value="ab">Abkhazian</option>
                                        <option value="aa">Afar</option>
                                        <option value="af">Afrikaans</option>
                                        <option value="ak">Akan</option>
                                        <option value="sq">Albanian</option>
                                        <option value="am">Amharic</option>
                                        <option value="ar">Arabic</option>
                                        <option value="an">Aragonese</option>
                                        <option value="hy">Armenian</option>
                                        <option value="as">Assamese</option>
                                        <option value="av">Avaric</option>
                                        <option value="ae">Avestan</option>
                                        <option value="ay">Aymara</option>
                                        <option value="az">Azerbaijani</option>
                                        <option value="bm">Bambara</option>
                                        <option value="ba">Bashkir</option>
                                        <option value="eu">Basque</option>
                                        <option value="be">Belarusian</option>
                                        <option value="bn">Bengali (Bangla)</option>
                                        <option value="bh">Bihari</option>
                                        <option value="bi">Bislama</option>
                                        <option value="bs">Bosnian</option>
                                        <option value="br">Breton</option>
                                        <option value="bg">Bulgarian</option>
                                        <option value="my">Burmese</option>
                                        <option value="ca">Catalan</option>
                                        <option value="ch">Chamorro</option>
                                        <option value="ce">Chechen</option>
                                        <option value="ny">Chichewa, Chewa, Nyanja</option>
                                        <option value="zh">Chinese</option>
                                        <option value="zh-Hans">Chinese (Simplified)</option>
                                        <option value="zh-Hant">Chinese (Traditional)</option>
                                        <option value="cv">Chuvash</option>
                                        <option value="kw">Cornish</option>
                                        <option value="co">Corsican</option>
                                        <option value="cr">Cree</option>
                                        <option value="hr">Croatian</option>
                                        <option value="cs">Czech</option>
                                        <option value="da">Danish</option>
                                        <option value="dv">Divehi, Dhivehi, Maldivian</option>
                                        <option value="nl">Dutch</option>
                                        <option value="dz">Dzongkha</option>
                                        <option value="en">English</option>
                                        <option value="eo">Esperanto</option>
                                        <option value="et">Estonian</option>
                                        <option value="ee">Ewe</option>
                                        <option value="fo">Faroese</option>
                                        <option value="fj">Fijian</option>
                                        <option value="fi">Finnish</option>
                                        <option value="fr">French</option>
                                        <option value="ff">Fula, Fulah, Pulaar, Pular</option>
                                        <option value="gl">Galician</option>
                                        <option value="gd">Gaelic (Scottish)</option>
                                        <option value="gv">Gaelic (Manx)</option>
                                        <option value="ka">Georgian</option>
                                        <option value="de">German</option>
                                        <option value="el">Greek</option>
                                        <option value="kl">Greenlandic</option>
                                        <option value="gn">Guarani</option>
                                        <option value="gu">Gujarati</option>
                                        <option value="ht">Haitian Creole</option>
                                        <option value="ha">Hausa</option>
                                        <option value="he">Hebrew</option>
                                        <option value="hz">Herero</option>
                                        <option value="hi">Hindi</option>
                                        <option value="ho">Hiri Motu</option>
                                        <option value="hu">Hungarian</option>
                                        <option value="is">Icelandic</option>
                                        <option value="io">Ido</option>
                                        <option value="ig">Igbo</option>
                                        <option value="id">Indonesian</option>
                                        <option value="in">Indonesian</option>
                                        <option value="ia">Interlingua</option>
                                        <option value="ie">Interlingue</option>
                                        <option value="iu">Inuktitut</option>
                                        <option value="ik">Inupiak</option>
                                        <option value="ga">Irish</option>
                                        <option value="it">Italian</option>
                                        <option value="ja">Japanese</option>
                                        <option value="jv">Javanese</option>
                                        <option value="kn">Kannada</option>
                                        <option value="kr">Kanuri</option>
                                        <option value="ks">Kashmiri</option>
                                        <option value="kk">Kazakh</option>
                                        <option value="km">Khmer</option>
                                        <option value="ki">Kikuyu</option>
                                        <option value="rw">Kinyarwanda (Rwanda)</option>
                                        <option value="rn">Kirundi</option>
                                        <option value="ky">Kyrgyz</option>
                                        <option value="kv">Komi</option>
                                        <option value="kg">Kongo</option>
                                        <option value="ko">Korean</option>
                                        <option value="ku">Kurdish</option>
                                        <option value="kj">Kwanyama</option>
                                        <option value="lo">Lao</option>
                                        <option value="la">Latin</option>
                                        <option value="lv">Latvian (Lettish)</option>
                                        <option value="li">Limburgish (Limburger)</option>
                                        <option value="ln">Lingala</option>
                                        <option value="lt">Lithuanian</option>
                                        <option value="lu">Luga-Katanga</option>
                                        <option value="lg">Luganda, Ganda</option>
                                        <option value="lb">Luxembourgish</option>
                                        <option value="mk">Macedonian</option>
                                        <option value="mg">Malagasy</option>
                                        <option value="ms">Malay</option>
                                        <option value="ml">Malayalam</option>
                                        <option value="mt">Maltese</option>
                                        <option value="mi">Maori</option>
                                        <option value="mr">Marathi</option>
                                        <option value="mh">Marshallese</option>
                                        <option value="mo">Moldavian</option>
                                        <option value="mn">Mongolian</option>
                                        <option value="na">Nauru</option>
                                        <option value="nv">Navajo</option>
                                        <option value="ng">Ndonga</option>
                                        <option value="nd">Northern Ndebele</option>
                                        <option value="ne">Nepali</option>
                                        <option value="no">Norwegian</option>
                                        <option value="nb">Norwegian bokmÃ¥l</option>
                                        <option value="nn">Norwegian nynorsk</option>
                                        <option value="ii">Nuosu</option>
                                        <option value="oc">Occitan</option>
                                        <option value="oj">Ojibwe</option>
                                        <option value="cu">Old Church Slavonic, Old Bulgarian</option>
                                        <option value="or">Oriya</option>
                                        <option value="om">Oromo (Afaan Oromo)</option>
                                        <option value="os">Ossetian</option>
                                        <option value="pi">PÄli</option>
                                        <option value="ps">Pashto, Pushto</option>
                                        <option value="fa">Persian (Farsi)</option>
                                        <option value="pl">Polish</option>
                                        <option value="pt">Portuguese</option>
                                        <option value="pa">Punjabi (Eastern)</option>
                                        <option value="qu">Quechua</option>
                                        <option value="rm">Romansh</option>
                                        <option value="ro">Romanian</option>
                                        <option value="ru">Russian</option>
                                        <option value="se">Sami</option>
                                        <option value="sm">Samoan</option>
                                        <option value="sg">Sango</option>
                                        <option value="sa">Sanskrit</option>
                                        <option value="sr">Serbian</option>
                                        <option value="sh">Serbo-Croatian</option>
                                        <option value="st">Sesotho</option>
                                        <option value="tn">Setswana</option>
                                        <option value="sn">Shona</option>
                                        <option value="ii">Sichuan Yi</option>
                                        <option value="sd">Sindhi</option>
                                        <option value="si">Sinhalese</option>
                                        <option value="ss">Siswati</option>
                                        <option value="sk">Slovak</option>
                                        <option value="sl">Slovenian</option>
                                        <option value="so">Somali</option>
                                        <option value="nr">Southern Ndebele</option>
                                        <option value="es">Spanish</option>
                                        <option value="su">Sundanese</option>
                                        <option value="sw">Swahili (Kiswahili)</option>
                                        <option value="ss">Swati</option>
                                        <option value="sv">Swedish</option>
                                        <option value="tl">Tagalog</option>
                                        <option value="ty">Tahitian</option>
                                        <option value="tg">Tajik</option>
                                        <option value="ta">Tamil</option>
                                        <option value="tt">Tatar</option>
                                        <option value="te">Telugu</option>
                                        <option value="th">Thai</option>
                                        <option value="bo">Tibetan</option>
                                        <option value="ti">Tigrinya</option>
                                        <option value="to">Tonga</option>
                                        <option value="ts">Tsonga</option>
                                        <option value="tr">Turkish</option>
                                        <option value="tk">Turkmen</option>
                                        <option value="tw">Twi</option>
                                        <option value="ug">Uyghur</option>
                                        <option value="uk">Ukrainian</option>
                                        <option value="ur">Urdu</option>
                                        <option value="uz">Uzbek</option>
                                        <option value="ve">Venda</option>
                                        <option value="vi">Vietnamese</option>
                                        <option value="vo">VolapÃ¼k</option>
                                        <option value="wa">Wallon</option>
                                        <option value="cy">Welsh</option>
                                        <option value="wo">Wolof</option>
                                        <option value="fy">Western Frisian</option>
                                        <option value="xh">Xhosa</option>
                                        <option value="yi">Yiddish</option>
                                        <option value="ji">Yiddish</option>
                                        <option value="yo">Yoruba</option>
                                        <option value="za">Zhuang, Chuang</option>
                                        <option value="zu">Zulu</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Google Analytics -->
                            <div class="setting-card">
                                <div class="setting-card-header" data-i18n="ui.site_detail.settings.ga_title">Google Analytics</div>
                                <div class="setting-card-body">
                                    <p data-i18n="ui.site_detail.settings.ga_description">Enter your Google Analytics tracking ID to enable analytics for this site</p>
                                    <input type="text" class="form-control" name="ga_code" id="ga_code" data-i18n-placeholder="ui.site_detail.settings.ga_placeholder" placeholder="G-XXXXXXXXXX" />
                                </div>
                            </div>

                            <!-- Google Tag Manager -->
                            <div class="setting-card">
                                <div class="setting-card-header" data-i18n="ui.site_detail.settings.gtm_title">Google Tag Manager</div>
                                <div class="setting-card-body">
                                    <p data-i18n="ui.site_detail.settings.gtm_description">Enter your Google Tag Manager container ID for advanced tracking</p>
                                    <input type="text" class="form-control" name="gtm_code" id="gtm_code" data-i18n-placeholder="ui.site_detail.settings.gtm_placeholder" placeholder="GTM-XXXXXXX" />
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-end mt-4">
                            <button id="saveSettings" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>
                                <span data-i18n="ui.site_detail.settings.save_button">Save Settings</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content d-flex justify-content-between align-items-center">
            <div class="footer-versions">
                <div>Kyte Shipyardâ„¢ Version <span id="kyteShipyardVersion"></span></div>
                <div>Kyte JS Version <span id="kyteJSVersion"></span></div>
            </div>
            <p class="footer-copyright mb-0">KeyQ Â© 2020-2026</p>
        </div>
    </footer>

    <!-- Modal forms -->
    <div id="modalFormPage"></div>
    <div id="modalFormScript"></div>
    <div id="modalFormLibrary"></div>
    <div id="modalFormMedia"></div>
    <div id="modalFormNavigation"></div>
    <div id="modalFormSideNav"></div>
    <div id="modalFormSection"></div>

    <script>
        // Navigation handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Get the application ID from localStorage (set by kyte-shipyard-site-details.js)
            function getDashboardUrl() {
                const appId = localStorage.getItem('currentAppId');
                if (appId) {
                    const dashboardRequest = btoa(JSON.stringify({'model': 'Application', 'idx': parseInt(appId)}));
                    return '/app/dashboard/?request=' + encodeURIComponent(dashboardRequest);
                }
                return '/app/';
            }

            function getSitesListUrl() {
                const appId = localStorage.getItem('currentAppId');
                if (appId) {
                    const listRequest = btoa(JSON.stringify({'model': 'Application', 'idx': parseInt(appId)}));
                    return '/app/sites.html?request=' + encodeURIComponent(listRequest);
                }
                return '/app/sites.html';
            }

            // Back button handler
            const backButton = document.getElementById('back-to-sites');
            if (backButton) {
                backButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = getSitesListUrl();
                });
            }

            // App selector (dashboard link)
            const appSelector = document.getElementById('app-selector');
            if (appSelector) {
                appSelector.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = getDashboardUrl();
                });
            }
        });
    </script>
</body>
</html>